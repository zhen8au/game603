<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>曾「好」學</title>
        <!-- 字型圖示 Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
        <!-- 字體 Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>



    <body id="page-top">
        <!-- Navigation 導覽列 -->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav" >
            <div class="container px-4 px-lg-5">
                <!-- 左上標題 -->
                <a class="navbar-brand" href="index.html">🗺️曾「好」學</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" 
                        data-bs-toggle="collapse" data-bs-target="#navbarResponsive" 
                        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive" >
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html">課程介紹</a></li>
                        <li class="nav-item"><a class="nav-link active" href="class.html">任務地圖</a></li>
                        <li class="nav-item"><a class="nav-link" href="qa.html">QA</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        
        <!-- 網頁開頭標題 -->
        <header class="mastheadclass">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-between">
                <!-- <div class="d-flex justify-content-center"> -->
                  <!-- 左側補充區塊 -->
                    <div class="text-start">
                        <!-- 小標 -->
                        <h4 class="mb-1" style="font-size: 20px;color: #f7d6a3;">行銷傳道師</h4>
                        <!-- 主標 -->
                        <h1 class="fw-bold" style="color: #d9aa64;">曾光華</h1>
                        <!-- 副標 -->
                        <h4 class="mb-3" style="font-size: 35px;color: #f7d6a3;">思考升級冒險</h4>
                        <!-- 補充說明 -->
                        <h5 class="mb-4" style="font-size: 20px;">破關不是為了通關，而是為了變強</h5>
                        <!-- 行動按鈕 -->
                        <button class="custom-btn btn-11">立即挑戰 🏃‍♂️<div class="dot"></div></button>
                    </div>
                <!-- </div> -->
            </div>
        </header>


        <!-- 首頁分段連結 -->
        <div class="footer-nav text-center">
            <div class="col-md-24" style="background: rgba(19, 19, 19, 0.822);
                                          font-family:Comic Sans MS, Comic Sans, cursive;
                                          font-size: 20px;
                                          letter-spacing:2px;">
            </div>
        </div>

<!-- 內文 -->
    <!-- 任務說明書 -->
    <section class="case-study" style="border-bottom: 20px;padding-bottom: 30px;">
      <div class="text-center">
        <h2 class="title">任務說明書</h2>
      </div>
        <!-- 流程介紹 -->
          <div class="instructions">
            <h3>🎮使用指南</h3>
            <ul>
                <li><strong>🎯遊戲目標｜</strong>依序突破五座島嶼關卡，完成你的思辨修練之路</li>
                <li><strong>🚪開始方式｜</strong>取得入場券後，點擊「開始挑戰」解鎖第一關</li>
                <li><strong>🗺️關卡進行｜</strong>點擊任一島嶼查看任務說明，完成後自動前往下一站</li>
                <li><strong>🔒解鎖機制｜</strong>必須依序完成，無法跳關</li>
                <li><strong>🏆完成獎勵｜</strong>每關完成後獲得特定技能，全部完成可獲得思辨大師認證</li>
            </ul>
          </div>
      <!-- 任務說明書 - END  -->
    </section>

    <!-- 簡介1:流程介紹 -->
    <section class="case-study" style="border-bottom: 20px;padding-bottom: 30px;">
      <div class="text-center">
        <h2 class="title">地圖開放中：從新手到思考大師的五道關卡</h2>
        <div class="subtitle-class">透過五個關卡，培養批判思考與邏輯推理能力</div>
      </div>
      
      <div class="gamezz" style="margin-top: 30px;">

        <!-- 左側技能 -->
        <div class="medals-panel">
          <h4>🏅 技能獎牌</h4>
            <div class="medal-item">
                <div class="medal" id="medal1">🔍</div>
                <div class="medal-name">問題感知</div>
            </div>
            <div class="medal-item">
                <div class="medal" id="medal2">🎯</div>
                <div class="medal-name">邏輯思維</div>
            </div>
            <div class="medal-item">
                <div class="medal" id="medal3">📊</div>
                <div class="medal-name">數據判斷</div>
            </div>
            <div class="medal-item">
                <div class="medal" id="medal4">⚡</div>
                <div class="medal-name">推理分析</div>
            </div>
            <div class="medal-item">
                <div class="medal" id="medal5">💬</div>
                <div class="medal-name">論述表達</div>
            </div>
            <div class="medal-item">
                <div class="medal" id="finalTrophy">🏆</div>
                <div class="medal-name">思辨大師</div>
            </div>
        </div>

        <!-- 升級特效框 -->
        <div class="upgrade-effect" id="upgradeEffect">
            <h3>🎉 技能升級！</h3>
            <div style="display: flex; align-items: center; justify-content: center;">
                <div class="upgrade-icon" id="upgradeIcon">🧩</div>
                <!-- <div class="upgrade-arrow">⬆️</div> -->
            </div>
            <p id="upgradeText">獲得新技能：問題感知力</p><br>
            <button class="btn btn-primary" onclick="closeUpgrade()">繼續</button>
        </div>

		<!-- 🔁 加上這層 Flex 容器 -->
		<!-- 左側技能獎牌 -->
		<div class="game-layout">
		


		</div>
		
		


		

        <!-- 地圖路徑 -->
        <div class="game-container">
          <!-- S型圓滑路徑 -->
          <svg width="1200" height="800" style="position: absolute; top: 0; left: 0;">
              <path class="path" d="M 120 120 C 200 120, 350 140, 450 180 C 550 220, 650 200, 750 160 C 850 120, 950 140, 1000 200 C 1050 260, 1000 320, 900 360 C 800 400, 700 420, 600 400 C 500 380, 400 400, 350 450 C 300 500, 320 550, 380 580 C 440 610, 500 600, 580 590 C 660 580, 740 590, 820 610 C 900 630, 980 650, 1050 640"/>
          </svg>

          <!-- 移動的小人標記 -->
          <div class="moving-player" id="player">🚶</div>

          <!-- 開始閘門 -->
          <div class="island start-gate" onclick="showInfo('start')">
              🏁<br>開始挑戰
          </div>

          <!-- 關卡島嶼 -->
          <div class="island level-island locked" id="level1" style="top: 130px; left: 380px;" onclick="showInfo('level1')">
              🧩關卡1<br>問題是什麼？<br>思考從這開始
          </div>

          <div class="island level-island locked" id="level2" style="top: 110px; left: 680px;" onclick="showInfo('level2')">
              🧩關卡2<br>邏輯出發點<br>定義×脈絡×理性
          </div>

          <div class="island level-island locked" id="level3" style="top: 310px; left: 830px;" onclick="showInfo('level3')">
              🧩關卡3<br>話術偵探社<br>數字與指標陷阱
          </div>

          <div class="island level-island locked" id="level4" style="top: 380px; left: 530px;" onclick="showInfo('level4')">
              🧩關卡4<br>邏輯攻防戰<br>因果×關聯×變數
          </div>

          <div class="island level-island locked" id="level5" style="top: 530px; left: 310px;" onclick="showInfo('level5')">
              🧩關卡5<br>觀點實戰場<br>評論×架構×表達
          </div>

          <!-- 成功閘門 -->
          <div class="island success-gate" onclick="showInfo('success')">
              🏆<br>修練成功
          </div>
        </div>

		

        <!-- 資訊卡片 -->
        <div class="overlay" id="overlay" onclick="closeInfo()"></div>
        <div class="info-card" id="infoCard">
            <h3 id="cardTitle"></h3>
            <div class="subtitle" id="cardSubtitle"></div>
            <p id="cardDescription"></p>
            <div class="core-content" id="cardCore" style="display: none;">
                <h4>🎯 核心內容</h4>
                <p id="coreText"></p>
            </div>
            <div class="learning-points" id="cardLearning" style="display: none;">
                <h4>📚 學習重點</h4>
                <ol id="learningList"></ol>
            </div>
            <div class="rewards" id="cardRewards" style="display: none;">
                <h4>🏅 通關後可取得技能</h4>
                <ul id="rewardsList"></ul>
            </div>
            <div class="card-buttons">
                <button class="btn btn-primary" id="actionBtn" onclick="handleAction()">開始挑戰</button>
                <button class="btn btn-secondary" onclick="closeInfo()">關閉</button>
            </div>
        </div>

        <!-- 訊息框 -->
        <div class="message-box" id="messageBox">
            <h3 id="msgTitle"></h3>
            <p id="msgContent"></p>
            <button class="btn btn-primary" onclick="closeMessage()">確定</button>
        </div>

        <!-- 最終成就動畫((要改)) -->
        <div class="final-achievement" id="finalAchievement">
            <div class="final-title">🎊 思辨大師認證 🎊</div>
            <div class="trophy">🏆</div>
            <p style="color: white; font-size: 18px; text-align: center; margin-top: 20px;">
                恭喜您成為思辨能力大師！<br>
                ★通關獎勵：實體交流會邀請函
            </p><br>
            <div class="final-buttons">
                <button class="btn btn-primary" onclick="closeFinalAchievement()">完成修練</button>
            </div>
        </div>


    </div>  
      <!-- 流程 - END  -->
    </section>
<!-- ************************************************************************************* -->
<script>
	let currentLevel = 0;
	let hasInvitation = false;
	let completedLevels = [];

	const levelData = {
		start: {
			title: "開始你的思辨之旅",
			subtitle: "",
			description: "歡迎參加思考升級冒險！",
			action: "開始挑戰",
			canAccess: true
		},
		level1: {
			title: "🧩關卡1｜問題是什麼？思考從這開始",
			subtitle: "",
			description: "大學階段最重要的能力就是面對問題。專業學習的第一步，就是要能聽懂問題、了解問題的本質。",
			coreContent: "面對問題、認識問題、建立思考態度",
			learningPoints: [
				"學會面對問題：大學生活的第一場任務",
				"面對問題的第一步：別只聽懂字，還要懂意思",
				"當你不會解問題，是因為你沒看見它的本質"
			],
			rewards: ["問題意識", "問題感知力"],
			canAccess: () => hasInvitation
		},
		level2: {
			title: "🧩關卡2｜邏輯出發點：定義 × 脈絡 × 理性",
			subtitle: "",
			description: "邏輯思考的基礎在於理性、脈絡和明確定義。學會建立思考的出發點，是培養邏輯能力的關鍵。",
			coreContent: "理性是什麼？為何要建立脈絡？定義的爭議點在哪？",
			learningPoints: [
				"什麼才算理性思考？你的第一道腦內試煉",
				"理解「脈絡」：從片段到整體的思維升級",
				"定義爭奪戰：為何爭論總是從名詞開始？"
			],
			rewards: ["脈絡理解力", "定義思維"],
			canAccess: () => completedLevels.includes(1)
		},
		level3: {
			title: "🧩關卡3｜話術偵探社：數字與指標的陷阱",
			subtitle: "",
			description: "數字和指標看似客觀，但經常被不當使用或詮釋。學會識破數據背後的陷阱，是現代人必備的技能。",
			coreContent: "平均、指標常被誤用，如何拆解潛藏迷思？",
			learningPoints: [
				"平均的陷阱：這句話真的代表全部嗎？",
				"指標的迷霧：被數字說服前先想一步"
			],
			rewards: ["數據判斷力", "語言識讀力"],
			canAccess: () => completedLevels.includes(2)
		},
		level4: {
			title: "🧩關卡4｜邏輯攻防戰：因果 × 關聯 × 變數",
			subtitle: "",
			description: "因果關係與相關關係經常被混淆。理解變數之間的複雜關係，是進階邏輯思考的核心。",
			coreContent: "區辨因果與關聯、掌握中介與調節變數的概念",
			learningPoints: [
				"影響關係怎麼判？搞懂邏輯前別急著下結論",
				"因果 ≠ 關聯：別被線型圖蒙蔽了邏輯",
				"中介變數解密：你忽略的關鍵角色",
				"調節變數登場：當結果不是線性的時候"
			],
			rewards: ["邏輯推理力", "變數理解力"],
			canAccess: () => completedLevels.includes(3)
		},
		level5: {
			title: "🧩關卡5｜觀點實戰場：評論 × 架構 × 表達",
			subtitle: "",
			description: "最終關卡整合所有技能。學會建立有力觀點、避免邏輯謬誤，並以清晰架構表達想法。",
			coreContent: "觀點該如何建立？怎麼避免謬誤？怎樣表達有力？",
			learningPoints: [
				"蘋果橘子怎麼比？當比喻成為邏輯陷阱",
				"特例使用術：別讓個案代表全局",
				"評論不是說「我覺得」，而是提出有根據的立場",
				"什麼叫有架構的回答？讓觀點站得住腳"
			],
			rewards: ["評論力", "表達結構力", "批判思考力"],
			canAccess: () => completedLevels.includes(4)
		},
		success: {
			title: "🏆恭喜完成所有挑戰",
			subtitle: "",
			description: "",
			action: "領取認證",
			canAccess: () => completedLevels.includes(5)
		}
	};

	const positions = {
		start: { x: 120, y: 120 },
		level1: { x: 450, y: 180 },
		level2: { x: 750, y: 160 },
		level3: { x: 900, y: 360 },
		level4: { x: 600, y: 400 },
		level5: { x: 380, y: 550 },
		success: { x: 1050, y: 640 }
	};

	function updateIslandStates() {
		for (let i = 1; i <= 5; i++) {
			const island = document.getElementById(`level${i}`);
			const data = levelData[`level${i}`];
			
			if (data.canAccess()) {
				island.classList.remove('locked');
				if (completedLevels.includes(i)) {
					island.classList.add('completed');
				}
			} else {
				island.classList.add('locked');
			}
		}

		const successGate = document.querySelector('.success-gate');
		if (levelData.success.canAccess()) {
			successGate.classList.add('unlocked');
		}
	}

	function showInfo(type) {
		const data = levelData[type];
		const card = document.getElementById('infoCard');
		const overlay = document.getElementById('overlay');
		
		document.getElementById('cardTitle').textContent = data.title;
		document.getElementById('cardSubtitle').textContent = data.subtitle || '';
		document.getElementById('cardDescription').textContent = data.description;

		// 改這行，讓 description 支援置中格式
		// document.getElementById('cardDescription').innerHTML = `<div style="text-align:center;">${data.description}</div>`;

		// ⭐ 加這一行，重設捲軸到最上方
		card.scrollTop = 0;

		// 核心內容
		const coreSection = document.getElementById('cardCore');
		if (data.coreContent) {
			coreSection.style.display = 'block';
			document.getElementById('coreText').textContent = data.coreContent;
		} else {
			coreSection.style.display = 'none';
		}

		// 學習重點
		const learningSection = document.getElementById('cardLearning');
		if (data.learningPoints) {
			learningSection.style.display = 'block';
			const learningList = document.getElementById('learningList');
			learningList.innerHTML = '';
			data.learningPoints.forEach(point => {
				const li = document.createElement('li');
				li.textContent = point;
				learningList.appendChild(li);
			});
		} else {
			learningSection.style.display = 'none';
		}
		
		// 獲得技能
		const rewardsSection = document.getElementById('cardRewards');
		if (data.rewards) {
			rewardsSection.style.display = 'block';
			const rewardsList = document.getElementById('rewardsList');
			rewardsList.innerHTML = '';
			data.rewards.forEach(reward => {
				const li = document.createElement('li');
				li.textContent = reward;
				rewardsList.appendChild(li);
			});
		} else {
			rewardsSection.style.display = 'none';
		}
		
		// 設定動作按鈕
		const actionBtn = document.getElementById('actionBtn');
		actionBtn.dataset.action = type;
		
		if (type === 'start') {
			actionBtn.textContent = hasInvitation ? '已獲得邀請函' : '開始挑戰';
			actionBtn.disabled = hasInvitation;
		} else if (type === 'success') {
			actionBtn.textContent = '領取思辨大師認證';
			actionBtn.disabled = !data.canAccess();
		} else {
			const levelNum = parseInt(type.replace('level', ''));
			const isCompleted = completedLevels.includes(levelNum);
			const canAccess = data.canAccess();
			
			actionBtn.textContent = isCompleted ? '已完成' : (canAccess ? '開始挑戰' : '尚未解鎖');
			actionBtn.disabled = isCompleted || !canAccess;
		}
		
		overlay.classList.add('show');
		card.classList.add('show');
	}

	function closeInfo() {
		document.getElementById('overlay').classList.remove('show');
		document.getElementById('infoCard').classList.remove('show');
	}

	function showMessage(title, content) {
		document.getElementById('msgTitle').textContent = title;
		document.getElementById('msgContent').textContent = content;
		document.getElementById('overlay').classList.add('show');
		document.getElementById('messageBox').classList.add('show');
	}

	function closeMessage() {
		document.getElementById('overlay').classList.remove('show');
		document.getElementById('messageBox').classList.remove('show');
	}

	function movePlayer(targetType) {
		const player = document.getElementById('player');
		const target = positions[targetType];
		
		player.style.left = target.x - 15 + 'px';
		player.style.top = target.y - 15 + 'px';
	}

	function handleAction() {
		const actionType = document.getElementById('actionBtn').dataset.action;
		
		if (actionType === 'start') {
			hasInvitation = true;
			movePlayer('start');
			closeInfo();
			updateIslandStates();
			
			// 直接移動到第一關並顯示
			setTimeout(() => {
				movePlayer('level1');
				setTimeout(() => {
					showInfo('level1');
				}, 1000);
			}, 500);
			
		} else if (actionType === 'success') {
			closeInfo();
			setTimeout(() => {
				showFinalAchievement();
			}, 300);
		} else {
			const levelNum = parseInt(actionType.replace('level', ''));
			completedLevels.push(levelNum);
			movePlayer(actionType);
			closeInfo();
			updateIslandStates();
			
			setTimeout(() => {
				const rewards = levelData[actionType].rewards.join('、');
				showMessage(`關卡${levelNum}完成！`, `恭喜通過挑戰！ `, `下一步：技能升級`);
				
				// 顯示升級特效
				setTimeout(() => {
					closeMessage();
					showUpgradeEffect(levelNum);
					
					// 升級特效結束後解鎖獎牌
					setTimeout(() => {
						closeUpgrade();
						unlockMedal(levelNum);
						
						// 移動到下一關
						setTimeout(() => {
							if (levelNum < 5) {
								const nextLevelType = `level${levelNum + 1}`;
								movePlayer(nextLevelType);
								setTimeout(() => {
									showInfo(nextLevelType);
								}, 1000);
							} else {
								movePlayer('success');
								setTimeout(() => {
									showInfo('success');
								}, 1000);
							}
						}, 1000);
					}, 3000);
				}, 2000);
			}, 1000);
		}
	}

	//一開始不顯示到game-container區塊才顯示
	const medalsPanel = document.querySelector('.medals-panel');
	const target = document.querySelector('.game-container');

	const observer = new IntersectionObserver(
		(entries) => {
		entries.forEach(entry => {
			if (entry.intersectionRatio >= 0.5) {
			medalsPanel.style.display = 'block';
			} else {
			medalsPanel.style.display = 'none';
			}
		});
		},
		{
		root: null,          // 使用視窗為參考範圍
		threshold: 0.5       // 目標至少 50% 進入畫面才觸發
		}
	);

	observer.observe(target);

	// 獎牌對應的圖示和名稱
	const medalData = {
		1: { icon: '🔍', name: '問題感知力' },
		2: { icon: '🎯', name: '邏輯思維力' },
		3: { icon: '📊', name: '數據判斷力' },
		4: { icon: '⚡', name: '推理分析力' },
		5: { icon: '💬', name: '論述表達力' }
	};

	// 顯示升級特效
	function showUpgradeEffect(levelNum) {
		const upgradeEffect = document.getElementById('upgradeEffect');
		const upgradeIcon = document.getElementById('upgradeIcon');
		const upgradeText = document.getElementById('upgradeText');
		const overlay = document.getElementById('overlay');
		
		const medal = medalData[levelNum];
		upgradeIcon.textContent = medal.icon;
		upgradeText.textContent = `獲得新技能：${medal.name}`;
		
		overlay.classList.add('show');
		upgradeEffect.classList.add('show');
	}

	// 關閉升級特效
	function closeUpgrade() {
		document.getElementById('overlay').classList.remove('show');
		document.getElementById('upgradeEffect').classList.remove('show');
	}

	// 解鎖獎牌
	function unlockMedal(levelNum) {
		const medal = document.getElementById(`medal${levelNum}`);
		medal.classList.add('unlocked');
		
		// 檢查是否所有獎牌都已解鎖
		if (completedLevels.length === 5) {
			setTimeout(() => {
				document.getElementById('finalTrophy').classList.add('unlocked');
			}, 500);
		}
	}

    // 顯示最終成就動畫
    function showFinalAchievement() {
        const finalAchievement = document.getElementById('finalAchievement');
        const overlay = document.getElementById('overlay');
        
        overlay.classList.add('show');
        finalAchievement.style.display = 'flex';

        
        equipments.forEach(equipment => {
            setTimeout(() => {
                const element = document.getElementById(equipment.id);
                element.classList.add('equipped');
            }, equipment.delay);
        });
    }

    // 關閉最終成就
    function closeFinalAchievement() {
        const finalAchievement = document.getElementById('finalAchievement');
        const overlay = document.getElementById('overlay');
        
        finalAchievement.style.display = 'none';
        overlay.classList.remove('show');
        
        // 重置裝備狀態以便下次播放
        const equipments = ['eq1', 'eq2', 'eq3', 'eq4', 'eq5', 'eq6'];
        equipments.forEach(id => {
            document.getElementById(id).classList.remove('equipped');
        });
    }





	// 初始化玩家位置
	movePlayer('start');
	updateIslandStates();
</script>
<!-- ************************************************************************************* -->


<!-- 內文結束 -->

    <!-- 回最上層 -->
    <div class="join-team" style="float: right;padding-right: 20px;">
      <a class="btn btn-default btn-main" href="#" role="button">　TOP　</a>
    </div>
<!-- ==================================================================尾頁================================================================= -->
    <!-- Footer-->
      <footer class="footer small text-center text-white-50"><div class="container px-4 px-lg-5">
        <section class="text-center contact-section ">
          <div class="container px-4 px-lg-5">
            <h3 class="footer-title">成長靠經歷，成功靠思考。<br><br>別只經歷人生，學會用思考力走上新跑道。</h3>
            <div class="social d-flex justify-content-center">
              <a class="mx-2" href="https://www.facebook.com/Dr.marketing.power/" target="_blank"><i class="fab fa-facebook-f"></i></a>
            </div>
          </div>
        </section>
        <h2 style="font-size: 20px;color: rgb(87, 87, 87);">行銷傳道士 - 曾光華<br></h2>
      </footer>


        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
